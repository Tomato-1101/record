# 開発進捗

## 現在のフェーズ

**Phase 2: 機能拡張 - 完了 ✅**

## 最終更新

2026-01-25 (Phase 2 完了)

## 完了タスク

### Phase 1: MVP（最小実装）

- [x] プロジェクト基盤構築 (2026-01-25)
  - ディレクトリ構造作成
  - requirements.txt作成
  - config/default.yaml作成
  - .env セットアップ
  - .gitignore作成
  - 進捗.md作成
  - README.md作成

- [x] src/utils/logger.py 実装 (2026-01-25)
  - loguruを使用したログ処理
  - コンソール出力とファイル出力
  - ローテーション機能

- [x] src/config/settings.py 実装 (2026-01-25)
  - YAML設定ファイル読み込み
  - 環境変数（APIキー）読み込み
  - 設定の保存・更新機能

- [x] src/audio/buffer.py 実装 (2026-01-25)
  - Thread-safeなキュー実装
  - 30秒/60秒チャンク分割
  - メモリ効率的な管理

- [x] src/audio/recorder.py 実装 (2026-01-25)
  - PyAudioを使用した連続録音
  - 別スレッドでの録音処理
  - デバイス一覧取得機能

- [x] src/transcription/whisper_client.py 実装 (2026-01-25)
  - Groq Whisper API クライアント
  - エラーリトライ（指数バックオフ）
  - レート制限対応

- [x] src/transcription/gpt4o_client.py 実装 (2026-01-25)
  - OpenAI GPT-4o Audio API クライアント
  - gpt-4o-transcribe 対応
  - gpt-4o-transcribe-diarize 対応（話者分離）

- [x] src/gui/main_window.py 実装 (2026-01-25)
  - customtkinterによるモダンUI
  - 録音開始/停止機能
  - リアルタイムテキスト表示
  - クリップボードコピー機能

- [x] src/main.py 実装 (2026-01-25)
  - エントリーポイント
  - 設定とロガーの初期化
  - GUIアプリケーション起動

### Phase 2: 機能拡張

- [x] src/audio/vad.py 実装 (2026-01-25)
  - webrtcvad を使用した音声区間検出
  - 無音区間の自動スキップ（API送信コスト削減）
  - VAD感度設定（0-3段階）

- [x] 多言語UI実装 (2026-01-25)
  - src/locales/ja.json（日本語リソース）
  - src/locales/zh.json（中国語リソース）
  - src/locales/locale_manager.py（ローカライゼーション管理）
  - 言語切り替えボタン（タイトルバーに追加）
  - 全UI要素の多言語化

- [x] 詳細設定ダイアログ (2026-01-25)
  - src/gui/settings_dialog.py 実装
  - チャンク間隔設定（30秒/60秒）
  - APIモデル選択（Whisper/GPT-4o/GPT-4o Diarize）
  - 言語選択（ja/zh/en）
  - VAD有効化とVAD感度調整
  - 出力フォーマット選択

- [x] 出力フォーマット対応 (2026-01-25)
  - src/utils/output_formatter.py 実装
  - Markdown (.md) 形式
  - JSON (.json) 形式（タイムスタンプ・メタデータ付き）
  - テキスト (.txt) 形式改善

- [x] テキスト出力形式改善 (2026-01-25)
  - タイムスタンプを削除
  - 連続したテキストとして出力

## 進行中タスク

なし

## 未着手タスク（Phase 3以降）

### Phase 3: 最適化

- [ ] メモリ最適化
- [ ] 精度向上（プロンプト調整、オーバーラップ処理）
- [ ] ホットキー対応
- [ ] マルチスピーカー対応改善

## 問題・メモ

- PyAudio のインストール時に VC++ が必要な場合がある（Windows環境）
- Whisper API のレート制限に注意（Groq: 無料枠 2時間/時間）
- customtkinter を使用（軽量、モダンUI、将来のクロスプラットフォーム対応を意識）
- webrtcvad を使用（VAD: Phase 2で実装完了）
- PCMデータをWAVフォーマットに変換してAPI送信（waveモジュール使用）

## 次回やること

### Phase 2 完了後の推奨事項

1. **依存パッケージの再インストール**
   ```bash
   pip install -r requirements.txt  # webrtcvadが追加されています
   ```

2. **新機能のテスト**
   - 言語切り替えボタンをテスト（日本語 ⇄ 中文）
   - 設定ダイアログを開いて各種設定を変更
   - VAD有効化して無音区間がスキップされるか確認
   - 出力フォーマットを変更（txt/md/json）

3. **Phase 3の最適化開始**（オプション）
   - メモリ最適化
   - 精度向上（プロンプト調整、オーバーラップ処理）
   - ホットキー対応
